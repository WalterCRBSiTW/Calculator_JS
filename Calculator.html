<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <title>Document</title>
    <style>
      body {
        background-color: rgb(0, 0, 0);
      }
      button {
        width: 83px;
        height: 60px;
      }
    </style>
  </head>
  <body class="text-white ">
    <div
      class="row mx-auto mt-3 border-0 "
      style="width: 397px; height: 550px; "
    >
      <h4
        id="sd"
        class="col-12 md-2 text-right w-100 mt-1 h3"
        style="background-color: rgb(48, 48, 48); height: 40px; border-radius: 10px;"
      ></h4>
      <input
        id="input"
        class="col-12 w-100 mt-1 w-100 border-0 text-right text-white h1"
        style="background-color: rgb(75, 75, 75); height: 80px; border-radius: 15px;"
        readonly
      />
      <button
        type="button"
        class="clear btn btn-outline-warning  rounded mx-2"
        value="CE"
      >
        <h4>CE</h4>
      </button>
      <button
        type="button"
        class="clear btn btn-outline-warning  rounded mx-2"
        value="C"
      >
        <h4>C</h4>
      </button>
      <button
        type="button"
        class="clear btn btn-outline-warning  rounded mx-2"
        value="Del"
      >
        <h4>Del</h4>
      </button>
      <button
        type="button"
        class="cut btn btn-outline-info  rounded mx-2 "
        value="/"
      >
        <h4>/</h4>
      </button>
      <button
        type="button"
        class="num btn btn-outline-secondary  rounded mx-2"
        value="9"
      >
        <h4>9</h4>
      </button>
      <button
        type="button"
        class="num btn btn-outline-secondary  rounded mx-2"
        value="8"
      >
        <h4>8</h4>
      </button>
      <button
        type="button"
        class="num btn btn-outline-secondary  rounded mx-2"
        value="7"
      >
        <h4>7</h4>
      </button>
      <button
        type="button"
        class="cut btn btn-outline-info  rounded mx-2"
        value="*"
      >
        <h4>*</h4>
      </button>
      <button
        type="button"
        class="num btn btn-outline-secondary  rounded mx-2"
        value="6"
      >
        <h4>6</h4>
      </button>
      <button
        type="button"
        class="num btn btn-outline-secondary  rounded mx-2"
        value="5"
      >
        <h4>5</h4>
      </button>
      <button
        type="button"
        class="num btn btn-outline-secondary  rounded mx-2"
        value="4"
      >
        <h4>4</h4>
      </button>
      <button
        type="button"
        class="cut btn btn-outline-info  rounded mx-2"
        value="-"
      >
        <h4>-</h4>
      </button>
      <button
        type="button"
        class="num btn btn-outline-secondary  rounded mx-2"
        value="3"
      >
        <h4>3</h4>
      </button>
      <button
        type="button"
        class="num btn btn-outline-secondary  rounded mx-2"
        value="2"
      >
        <h4>2</h4>
      </button>
      <button
        type="button"
        class="num btn btn-outline-secondary  rounded mx-2"
        value="1"
      >
        <h4>1</h4>
      </button>
      <button
        type="button"
        class="cut btn btn-outline-info  rounded mx-2"
        value="+"
      >
        <h4>+</h4>
      </button>
      <button
        type="button"
        class="ca btn btn-outline-secondary  rounded mx-2"
        value="-"
      >
        <h4>+/-</h4>
      </button>
      <button
        type="button"
        class="num btn btn-outline-secondary  rounded mx-2"
        value="0"
      >
        <h4>0</h4>
      </button>
      <button
        type="button"
        class="ca btn btn-outline-secondary  rounded mx-2"
        value="."
      >
        <h4>.</h4>
      </button>
      <button
        type="button"
        id="eql"
        class="btn btn-outline-info  rounded mx-2"
        value="="
      >
        <h4>=</h4>
      </button>
    </div>
    <script>
      var input = document.getElementById("input");
      var newNum = document.getElementsByClassName("num");
      var show = document.getElementById("sd");
      var cut = document.getElementsByClassName("cut");
      var c = document.getElementsByClassName("clear");
      var change = document.getElementsByClassName("ca");
      var eql = document.getElementById("eql");

      for (var i = 0; i < newNum.length; i++) {
        newNum[i].onclick = getNum;
      }

      function getNum() {
        // input.innerText += this.innerText;
        if (input.value == "0") {
          input.value = "";
        }
        if (input.value.replace("-", "").replace(".", "").length == 9) {
          return;
        }
        input.value += this.value;
      }

      var sd = [];
      for (var i = 0; i < cut.length; i++) {
        cut[i].onclick = docut;
      }

      function docut() {
        if (input.value == "") {
          if (isNaN(sd[sd.length - 1]) && sd.length >= 2) {
            sd[sd.length - 1] = this.value;
            show.innerText = sd.join(" ");
          }
          return;
        }

        if (!isNaN(sd[sd.length - 1])) {
          return;
        }

        sd[sd.length] = input.value;
        sd[sd.length] = this.value;
        input.value = "";
        show.innerText = sd.join(" ");
      }

      for (var i = 0; i < c.length; i++) {
        c[i].onclick = doclear;
      }
      function doclear() {
        if (this.value == "CE") {
          input.value = "";
        }
        if (this.value == "C") {
          input.value = "";
          show.innerText = "";
          sd = [];
        }
        if (this.value == "Del") {
          var result = [];
          for (var i = 0; i < input.value.length; i++) {
            result += input.value[i];
          }
          str = result.substring(0, result.length - 1);
          input.value = str;
        }
        return;
      }

      for (var i = 0; i < change.length; i++) {
        change[i].onclick = dochange;
      }
      function dochange() {
        if (input.value == "") {
          return;
        }
        if (this.value == "-") {
          input.value = parseFloat(input.value) * -1; //parseFloat 将它的字符串参数解析成为浮点数并返回。
        }
        if (this.value == ".") {
          if (input.value.indexOf(".") != -1 || input.value == "") {
            //？？？？？？？？？？？？？？？？？？
            return;
          }
          input.value += ".";
        }
      }

      eql.onclick = doeql;
      function doeql() {
        show.innerText = eval(show.innerText + input.value);
        input.value = "";       
      }
    </script>
  </body>
</html>
